<div class="modal-overlay" (click)="onClose()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Détails de la tâche</h2>
      <button class="close-button" (click)="onClose()">✕</button>
    </div>

    <div class="modal-body">
      <div class="detail-section">
        <h3 class="section-title">Informations générales</h3>

        <div class="form-group">
          <label for="edit-title">Titre:</label>
          <input
            type="text"
            id="edit-title"
            class="form-control"
            [(ngModel)]="editedTitle"
            (ngModelChange)="onFieldChange()"
          >
        </div>

        <div class="form-group">
          <label for="edit-description">Description:</label>
          <textarea
            id="edit-description"
            class="form-control"
            rows="4"
            [(ngModel)]="editedDescription"
            (ngModelChange)="onFieldChange()"
            placeholder="Ajoutez une description..."
          ></textarea>
        </div>
      </div>

      <div class="detail-section">
        <h3 class="section-title">État et priorité</h3>

        <div class="form-row">
          <div class="form-group">
            <label for="edit-status">Statut:</label>
            <select
              id="edit-status"
              class="form-control"
              [(ngModel)]="selectedStatus"
              (ngModelChange)="onFieldChange()"
            >
              <option value="todo">À faire</option>
              <option value="in-progress">En cours</option>
              <option value="done">Terminé</option>
            </select>
          </div>

          <div class="form-group">
            <label for="edit-priority">Priorité:</label>
            <select
              id="edit-priority"
              class="form-control"
              [(ngModel)]="selectedPriority"
              (ngModelChange)="onFieldChange()"
            >
              <option value="low">Basse</option>
              <option value="medium">Moyenne</option>
              <option value="high">Haute</option>
            </select>
            <span class="priority-badge" [ngClass]="getPriorityClass(selectedPriority())">
              {{ getPriorityLabel(selectedPriority()) }}
            </span>
          </div>
        </div>
      </div>

      <div class="detail-section">
        <h3 class="section-title">Dates</h3>

        <div class="detail-row">
          <span class="detail-label">Créée le:</span>
          <span class="detail-value">{{ formatDate(task().createdAt) }}</span>
        </div>

        <div class="form-group">
          <label for="edit-dueDate">Date limite:</label>
          <input
            type="date"
            id="edit-dueDate"
            class="form-control"
            [(ngModel)]="editedDueDate"
            (ngModelChange)="onFieldChange()"
          >
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-secondary" (click)="onClose()">Fermer</button>
      <button class="btn-primary" (click)="onSave()" [disabled]="!hasChanges()">
        Enregistrer les modifications
      </button>
    </div>
  </div>
</div>